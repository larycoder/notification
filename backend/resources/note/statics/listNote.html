<!DOCTYPE html>

<head>
    <title>List Note</title>
    <script src="js/api.js"></script>
    <script src="js/data.js"></script>
    <script src="js/render.js"></script>
    <script>
        function createInfoTable() {
            let opt = document.getElementById("log_opt_type").value;
            let data = callSimpleApi("GET", "/noteApi/" + opt);
            data = convertTextToJson(data);
            document.getElementById("info").innerHTML = renderJsonAsTable(data, "info");
        }

        function addDetailNotePageToTable() {
            let table = document.getElementById("info_table");
            let idValues = getColumnValuesOfTable(table, "id");
            let opt = document.getElementById("log_opt_type").value;

            let linkValues = [];
            for(id of idValues) {
                let link = "detailNote.html?id=" + id + "&type=" + opt;
                let tag = "<a href = \"" + link + "\">ref</a>";
                linkValues.push(tag);
            }
            addColToTable(table, "detail", linkValues);
        }

        function showInfoTable() {
            createInfoTable();
            addDetailNotePageToTable();
        }
    </script>
</head>

<body>
    <h2>Dashboard</h2>
    <div id="log_opt">
        <label for="log_opt_type">Log Type:</label>
        <select id="log_opt_type">
            <option value="task" selected>task</option>
            <option value="diary">diary</option>
        </select>
        <button type="button" onclick="showInfoTable()">Submit</button>
    </div>
    <div id="info"></div>
</body>